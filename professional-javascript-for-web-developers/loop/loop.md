# Event-loop运行机制
## js为什么是单线程？
Javascript是运行在浏览器的语言，js的单线程与它的用途有关。作为浏览器脚本语言，它的用途主要是与用户互动。
以DOM操作为例，如果同时有两个线程：一个是在DOM上增加节点，一个是在DOM上删除节点，浏览器应该以哪个线程为准。
由此，js的单线程保证了DOM操作的一致性。
---
## 任务队列
单线程就意味着，所有任务需要排队，前一个任务结束，才会执行后一个任务。如果前一个任务耗时很长，后一个任务就不得不一直等着。

于是，所有任务可以分成两种，一种是同步任务（synchronous），另一种是异步任务（asynchronous）。同步任务指的是，在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务；异步任务指的是，不进入主线程、而进入"任务队列"（task queue）的任务，只有"任务队列"通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。

1.所有同步任务都在一个执行栈上执行。
2.执行栈之外，还有一个任务队列，用于存放异步任务。
3.一旦执行栈所有同步任务执行完毕，依次读取任务队列的异步任务，压入执行栈
4.主线程不断重复以上三步
主线程从"任务队列"中读取事件，这个过程是循环不断的，所以整个的这种运行机制又称为Event Loop（事件循环）。

![Event-loop过程](https://github.com/lyllovelemon/algorithm-js/tree/master/professional-javascript-for-web-developers/loop/loop.png Event-loop过程)