# 词法作用域
```javascript
function foo(a) {
  var b=a*2;
  function bar(c) {
    console.log(a,b,c);
  }
  bar(b*3);
  
}
foo(2)
```
>答案在本文末尾

## 作用域查找
本题有三个逐层嵌套的作用域，分别是foo,foo之内bar之外的部分，即b在的作用域，bar。
+ 第一层包含整个全局作用域，其中只有一个标识符:foo。
+ 第二层包含foo创建的作用域，其中有三个标识符:a,b,bar。
+ 第三层包含bar创建的作用域，其中只有一个标识符:c。

在代码中，引擎执行console声明，并查找a,b,c三个变量的引用，先查找a，它首先从最内部的作用域，也就是bar声明的作用域查找，
找不到则往上级查找，在这里找到了a，因此引擎使用了这个引用。b和a的查找过程一样，c在最内层就找到了。
> 作用域查找会在找到第一个匹配的标识符时停止，在多层嵌套作用域中可以定义同名的标识符，这叫“遮蔽效应”(内部的标识符遮蔽了外部的标识符)。作用域查找始终
从运行时所处的最内部的作用域开始，逐级向外，直到遇到第一个匹配的标识符。

## 编译原理
程序的一段代码被执行前要经历三个步骤，统称为编译。

### 分词/词法分析
这个过程会将字符组成的的字符串分解成有意义的代码块。var b=3;这段程序会被分解成,var、b、=、3、;。

### 解析/语法分析
这个过程将词法单元流转换成一个由元素逐级嵌套形成的代表程序语法的树，这个树被称为抽象语法树。(Abstract Syntax Tree,AST).
var b=3;的抽象语法树中可能含有一个叫variableDeclaration的顶级节点，接下来是一个叫Identifier（它的值是b）的子节点，以及一个叫
AssignmentExpression的子节点。AssignmentExpression节点有一个叫做NumericLiteral(它的值是3)的子节点。
### 代码生成
将AST转换成可执行的代码的过程叫代码生成。

查找类型有LHS和RHS两种:LHS可看为"赋值操作的目标是谁"，RHS可看为"找到它的值",

请看下面一段代码:
```javascript
function foo(a) {
  console.log(a)
}
foo(2);
```
最后一行foo(...)函数为RHS引用，意味着去找到foo的值，并把它给我。


## 答案
1. 2,4,12